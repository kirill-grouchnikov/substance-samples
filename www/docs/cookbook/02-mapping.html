<html>
<head>
<title>Substance Samples - Cookbook mapping</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<h1>Mapping design to UI toolkit</h1>

<h3>Overview of the application areas</h3>

<p>In the <a href="01-analysis.html">first step</a> we have identified the
decoration and functional areas of Cookbook UI. The screenshot below shows the
application decoration areas:</p>

<img src="../../images/cookbook/01-analysis/decoration-all.png" width=500 height=267>

<p>and the next screenshot shows the application functional areas:</p>

<img src="../../images/cookbook/01-analysis/functional-all.png" width=500 height=267>

<p>As you can see, the application decoration and functional areas are not the
same. During this phase we are going to map the application functional areas
to Swing container hierarchy and the application decoration areas to Substance
decoration areas.</p>

<h3>Mapping functional areas to Swing</h3>

<p>This phase will in most cases take you from the realm of pure design to the
limitations of Swing. While the application functional areas will in most cases define 
the hierarchy of your Swing containers, the mapping itself might not be 
straightforward. Designer's work on the UI mockup screens does not consider the 
implementation limitations of the specific UI toolkit. This is especially
true for such a dynamic area as resizability behavior - what happens when 
the user resizes the application window (if he is allowed to do so by the 
application code)?</p>

<p>If the UI design is done in a pixel-based tool (such as Photoshop), the most
obvious choice for a Swing implementor would be to use absolute (null) layout
manager. This is usually considered a bad Swing practice. Instead, you would usually
employ a combination of core, third-party and custom layout managers that 
handle the initial sizing of the components and the dynamic resizing behavior.</p>

<h3>Mapping decoration areas to Substance</h3>

<p>This phase will take you further away from the pure design to the limitations
of Substance. If you are not familiar with the concept of decoration areas and
painters in Substance, please first read the following documentation:</p>

<ul>
  <li><a href="https://substance.dev.java.net/docs/painters/decoration.html">Decoration
painters</a></li>
  <li><code><font color="darkblue"><a href="https://substance.dev.java.net/docs/api/SetDecorationType.html">setDecorationType()</a></font></code>
  API.</li>
  <li><code><font color="darkblue"><a href="https://substance.dev.java.net/docs/api/GetDecorationType.html">getDecorationType()</a></font></code>
  API.</li>
</ul>

<p>The list of available Substance decoration areas is defined in the 
<code><font color="darkblue">org.jvnet.substance.painter.decoration.DecorationAreaType</font></code>
enum.</p>

<p>As the documentation of
<code><font color="darkblue"><a href="https://substance.dev.java.net/docs/api/SetDecorationType.html">setDecorationType()</a></font></code>
specifies, the passed decoration area type is applied to the component itself
and recursively on all its children, unless a child is marked with another
decoration area type (with the same API). When is this behavior useful?
We're going to see a more complicated example in a short while, but in the
meantime here is a simple one:</p>

<img src="../../images/cookbook/02-mapping/original-searchfield.png" width=293 height=44>

<p>This screenshot shows a footer bar of the recipe list panel. As you can see, while
the add / remove buttons are using the same colors as the footer bar itself, the
text field is skinned with a different color scheme. In Substance API, you would
mark the footer bar with <code><font color="darkblue">FOOTER</font></code>
and the search text field with <code><font color="darkblue">NONE</font></code>.
All the buttons would get the <code><font color="darkblue">FOOTER</font></code>
from their parent (footer bar), while the search text field will use the
<a href="https://substance.dev.java.net/docs/skins/colorschemebundles.html">color
scheme bundle</a> of the <code><font color="darkblue">NONE</font></code>
decoration are type.</p>

<p>While not necessarily required, it is useful to remember that most core (and 
supported third-party) components are already marked to belong to a specific 
Substance decoration area. This comes especially handy for the header application 
area. The header portion of Cookbook UI can be mapped to a decorated title pane 
(<code><font color="darkblue">PRIMARY_TITLE_PANE</font></code> type) and an 
unfloatable toolbar (<code><font color="darkblue">TOOLBAR</font></code>
type). While not necessarily required, reusing existing Swing components will
make the implementation part easier.</p>

<p>What is another usage of using different decoration area types
on a parent component and one of its children? The answer is quite simple - when the 
application functional and decoration areas are different (like is the case
with Cookbook UI). The screenshot below shows the sidebar part of Cookbook:</p>

<img src="../../images/cookbook/01-analysis/cookbook-sidebar.png" width=272 height=340>

<p>There is a clear visual continuation between the category list and recipe list
as far as the decoration areas go. The textures (dark mahogany and golden brush) flow
seemlessly across the boundaries of the functional areas, and the top bar with 
evenly-spaced diffused lights further enforces this continuation. The final polish
comes from the vertical separator that uses matching colors in the different
decoration areas.</p>

<p>If, for the reasons stated above, you have decided to build your Swing container
hierarchy based on the application functional areas, you can use the matching 
Substance decoration area types on the specific sub-panels (without mixing the different
types in the same hierarchy path). However, using the 
<code><font color="darkblue"><a href="https://substance.dev.java.net/docs/api/SetDecorationType.html">setDecorationType()</a></font></code>
API is only one part of the implementation. The second part comes from your custom
<a href="https://substance.dev.java.net/docs/painters/decoration.html">decoration
painter</a> that is implementing the painting itself. While this topic is subject 
of the next phase, the ease of implementation is going to dictate mixing different
decoration area types as shown in the next section.</p>

<h3>Swing containers and Substance decoration areas</h3>

<p>This section will show the Swing hierarchy behind the Substance-based
implementation of Cookbook UI and the matching decoration area types. While most of the 
reasons behind this implementation are given in the sections above, one of them
is part of the next phase (simplifying the implementation complexity of the
custom decoration painter).</p>

<p>We're going to start with the layout of the content pane:</p>

<img src="../../images/cookbook/02-mapping/hierarchy1.png" width=500 height=267>

<p>Here, we're using the core <code><font color="darkblue">BorderLayout</font></code>
and add toolbar at <code><font color="darkblue">NORTH</font></code>, sidebar at
<code><font color="darkblue">WEST</font></code> and main recipe panel at 
<code><font color="darkblue">CENTER</font></code>.</p>

<p>The next screenshot shows the children of the sidebar panel:</p>

<img src="../../images/cookbook/02-mapping/hierarchy2.png" width=500 height=267>

<p>The top part is the only custom component which is not painted by Substance.
This is done for purely implementation complexity considerations - it is much easier
to override the <code><font color="darkblue">paintComponent()</font></code>
method to emulate the light holder than to do it with Substance decoration painters.
The <code><font color="darkblue">CENTER</font></code> part is another panel which
is decorated with <code><font color="darkblue">GENERAL</font></code> area type.
As the next phase will show, this makes it easier to implement the 
evenly-spaced diffused lights (the continuous look of the texture is not 
a factor in this particular decision).</p>

<p>Inside this <code><font color="darkblue">GENERAL</font></code>-decorated panels
we have the <code><font color="darkblue">BorderLayout</font></code> with two
panels:</p>

<img src="../../images/cookbook/02-mapping/hierarchy3.png" width=500 height=267>

<p>Note that these two panels do not have any decoration area type installed on them 
- they get the <code><font color="darkblue">GENERAL</font></code> from the parent
panel.</p>

<p>The last diagram shows the last level of Swing hierarchy as far as mapping
the decoration areas goes:</p>

<img src="../../images/cookbook/02-mapping/hierarchy4.png" width=500 height=267>

<p>Here, each (functional) panel has a footer bar and the main area. The footer
bar is a panel decorated with <code><font color="darkblue">FOOTER</font></code>,
thus overriding the decoration area type inherited from the grandparent panel.
The main areas do not have any decoration area types installed on them,
inheriting the grandparent panel settings.</p>

<p>The final piece comes by installing the <code><font color="darkblue">NONE</font></code>
type on the search text field in the second footer bar, thus overriding the inherited
<code><font color="darkblue">FOOTER</font></code> setting.</p>

</body>
</html>
